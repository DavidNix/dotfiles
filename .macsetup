echo "Installing Xcode stuff"
xcode-select --install

# Check for Homebrew,
# Install if we don't have it
if test ! $(which brew); then
  echo "Installing homebrew..."
  ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
fi

# Update homebrew recipes
echo "Updating homebrew..."
brew update

echo "Installing Git..."
brew install git

echo "Git config"

git config --global user.name "David Nix"
git config --global user.email hello@davidnix.io
git config --global push.default current
git config --global fetch.prune true
# https://help.github.com/en/github/using-git/caching-your-github-password-in-git
git config --global credential.helper osxkeychain

echo "Installing brew git utilities..."
brew install git-extras
brew install legit
brew install git-flow

echo "Installing other brew stuff..."
brew install asdf
brew install gpg
brew install helm
brew install jq
brew install kubectl
brew install kubectx
brew install mackup
brew install neovim
brew install rg
brew install stern # k8s log helper
brew install tldr
brew install tmux
brew install trash
brew install tree
brew install wget
brew install xsv

# k8s port forwarding
brew tap farmotive/k8s
brew install kpoof

echo "Cleaning up brew"
brew cleanup

echo "Installing vim plugins"
VIM_PLUGIN_PATH="$HOME/.vim/pack/bundle/start"

mkdir -p "$VIM_PLUGIN_PATH"
git clone https://github.com/preservim/nerdtree "$VIM_PLUGIN_PATH/nerdtree"
git clone https://github.com/vim-airline/vim-airline "$VIM_PLUGIN_PATH/vim-airline" 
git clone https://github.com/tpope/vim-commentary "$VIM_PLUGIN_PATH/vim-commentary" 
git clone https://github.com/godlygeek/tabular "$VIM_PLUGIN_PATH/tabular" 
git clone https://github.com/hashivim/vim-terraform.git "$VIM_PLUGIN_PATH/vim-terraform"
git clone https://github.com/junegunn/fzf "$VIM_PLUGIN_PATH/fzf"
~/.vim/pack/bundle/start/fzf/install --bin

echo "Installing asdf plugins"
cat .tool-versions | awk '{print $1}' | xargs -n 1 asdf plugin add 
mv .tool-version ~
asdf install

echo "Installing tmux plugin manager"
git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm

echo "Installing ohmyzsh"
sh -c "$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
git clone https://github.com/zsh-users/zsh-autosuggestions ~/.oh-my-zsh/custom/plugins/zsh-autosuggestions
git clone https://github.com/zsh-users/zsh-completions ~/.oh-my-zsh/custom/plugins/zsh-completions 

echo "Complete!"

